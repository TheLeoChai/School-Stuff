(function($,undefined){var rmpia_render_latest=function(){$.ajax({url:"/rmpia/latest-value",dataType:"json",success:function(e){rmpia_populate_latest(e)}})};var rmpia_populate_latest=function(e){var t=false;if($("#rmpia_widget").length>0){t=true;rmpia_populate_widget(e)}if($("#rmpia_index").length>0){t=true;rmpia_populate_top_index(e)}if(t){setTimeout(rmpia_render_latest,6e4)}};var rmpia_populate_top_index=function(e){$("#indexShortName").html(e.indexShortName);var t=(new Number(e.latestValue)).toFixed(2);$("#latestValue").html(t);var n=(new Number(e.high52w)).toFixed(2);$("#high52w").html("$"+n);var r=(new Number(e.low52w)).toFixed(2);$("#low52w").html("$"+r);var i=(new Number(e.ytdPctChange)).toFixed(2);if(i>=0){$("#ytdPctChange").addClass("rmpia_pos").removeClass("rmpia_neg")}else{$("#ytdPctChange").addClass("rmpia_neg").removeClass("rmpia_pos")}$("#ytdPctChange").html(i+"%");var s=(new Number(e.valueChange)).toFixed(2);var o;if(s>=0){o="+"+s;$("#valueChange").addClass("rmpia_pos").removeClass("rmpia_neg")}else{o=""+s;$("#valueChange").addClass("rmpia_neg").removeClass("rmpia_pos")}var u=(new Number(e.pctChange)).toFixed(2);o+=" | "+u+"%";$("#valueChange").html(o);$("#latestUpdate").html(e.latestUpdateDate);var a=t-r;var f=n-r;var l=a/f;var c=1+l*300;$("#triangleBlackMarker").css("margin-left",c)};var rmpia_populate_widget=function(e){var t=(new Number(e.latestValue)).toFixed(2);$("#rmpiaLatestValue").html(t);var n=(new Number(e.ytdPctChange)).toFixed(2);if(n>=0){$("#rmpiaYtdPctChange").addClass("rmpia_pos").removeClass("rmpia_neg")}else{$("#rmpiaYtdPctChange").addClass("rmpia_neg").removeClass("rmpia_pos")}$("#rmpiaYtdPctChange").html(n+"%");var r=(new Number(e.valueChange)).toFixed(2);var i;if(r>=0){i="+"+r;$("#rmpiaValueChange").addClass("rmpia_pos").removeClass("rmpia_neg")}else{i=""+r;$("#rmpiaValueChange").addClass("rmpia_neg").removeClass("rmpia_pos")}var s=(new Number(e.pctChange)).toFixed(2);i+=" | "+s+"%";$("#rmpiaValueChange").html(i);$("#rmpiaLatestUpdate").html(e.latestUpdateDate);$("#rmpia_widget").show()};rmpia_render_components=function(){$.ajax({url:document.location.protocol+"//"+document.location.host+"/rmpia/datatable",dataType:"json",success:function(e){rmpia_populate_component_table(e)}})};var rmpia_populate_component_table=function(e){$("#rmpia_components_tbl").dataTable({iDisplayLength:30,bEscapeRegex:false,bsearching:false,binfo:false,bPaginate:false,data:e,aaData:e,aoColumns:[{sTitle:"Ticker",sType:"string",mRender:rmpia_formatCompany},{sTitle:"Price ($)",sType:"numeric-comma",sClass:"right",mRender:rmpia_format2,oCustomInfo:{decimalPlaces:2,decimalSeparator:"."}},{sTitle:"Change (%)",sType:"numeric-comma",sClass:"right",mRender:rmpia_formatChg,oCustomInfo:{decimalPlaces:2,decimalSeparator:"."}},{sTitle:"Shares",sType:"numeric-comma",sClass:"right",mRender:rmpia_format1,oCustomInfo:{decimalPlaces:1,decimalSeparator:"."}},{sTitle:"Weight (%)",sType:"numeric",sClass:"right",mRender:rmpia_format2}]})};var rmpia_format1=function(e,t,n){if(t==="display"){return parseFloat(e).toFixed(1)}return e};var rmpia_format2=function(e,t,n){if(t==="display"){return parseFloat(e).toFixed(2)}return e};var rmpia_formatCompany=function(e,t,n){if(t==="display"){var r=e.split("|");var i=r[0].toLowerCase();return'<a href="/quote/'+i+'" title="'+r[1]+'">'+r[0]+"</a>"}return e};var rmpia_formatChg=function(e,t,n){if(t==="display"){var r=parseFloat(e).toFixed(2);if(r>0)return'<span class="green">'+r+"</span>";if(r<0)return'<span class="red">'+r+"</span>";return r}return e};var rmpia_format_date=function(sourceDate){var day,month,year,hours,minutes,ampm="AM";var timeZone=String(String(sourceDate).split("(")[1]).split(")")[0];var hours24=sourceDate.getHours();if(hours24>12){ampm="PM";hours=eval(hours24-12)}else if(hours24===0){ampm="AM";hours="12"}else{ampm="AM";hours=hours24}day=sourceDate.getDate();month=sourceDate.getMonth()+1;year=sourceDate.getFullYear();minutes=("0"+(sourceDate.getMonth()+1)).slice(-2);return month+"/"+day+"/"+year+" "+hours+":"+minutes+" "+ampm+" "+timeZone};if($("#rmpia_widget").length>0||$("#rmpia_index").length>0){rmpia_render_latest()}if($("#rmpia_components").length>0){rmpia_render_components()}return{rmpia_render_latest:rmpia_render_latest}})(jQuery)